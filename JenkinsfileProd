node {
    properties(
        [
            pipelineTriggers([pollSCM('H/2 * * * *')]),
            disableConcurrentBuilds()
        ]
    )

    stage('Clone repository'){
        checkout scm
    }

    stage('Build and Upload App Bundle to Play Store'){
        withCredentials([
            [$class: "FileBinding", credentialsId: 'play-store-svc-acc', variable: 'PLAY_STORE_SVC_ACC'],
        ]){
            app = docker.build("flutter:demo")
        }

        echo "App Bundle uploaded to Play Store"
    }

    stage('Completed'){
        echo "Completed"
    }
}